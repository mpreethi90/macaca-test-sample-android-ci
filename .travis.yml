language: android
sudo: false
jdk:
  - openjdk7
  - oraclejdk7
android:
  components:
    - build-tools-23.0.2
    - android-23
    - extra-android-m2repository
    - extra-android-support
env:
  - JAVA_HOME=/usr/lib/jvm/java-7-oracle
  - ANDROID_HOME=/usr/local/android-sdk
before_install:
  - echo yes | android update sdk --all --filter build-tools-23.0.2 --no-ui --force
before_script:
  - . $HOME/.nvm/nvm.sh
  - nvm install 4
  - nvm use 4
  - npm install
  - echo no | android create avd --force -n test -t android-19 --abi armeabi-v7a
  - emulator -avd test -no-audio -no-window &
  - android-wait-for-emulator
  - adb shell input keyevent 82 &
script: "make travis"
after_script: "npm install coveralls@2 && cat ./coverage/lcov.info | coveralls"
